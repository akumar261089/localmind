<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8" />
    <title>LocalMind Chat</title>
    <link rel="stylesheet" href="css/localmind.css">

    <!-- Markdown & Syntax Highlighting -->
    <script src="https://cdn.jsdelivr.net/npm/marked/marked.min.js"></script>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/11.9.0/styles/github-dark.min.css">
    <script src="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/11.9.0/highlight.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/11.9.0/highlight.min.js"></script>
    <script>
        // Inline script to prevent flash of wrong theme
        (function () {
            const theme = localStorage.getItem("localmind_theme") || "dark";
            document.documentElement.setAttribute("data-theme", theme);
        })();
    </script>
</head>

<body>

    <header>
        <a href="index.html" style="color:inherit; text-decoration:none; display:flex; align-items:center; gap:8px;">
            <strong>ðŸ§  LocalMind</strong>
        </a>
        <a href="browse.html">Browse</a>
        <button id="themeToggleBtn" class="secondary" style="margin-left:auto; padding:6px 10px;">ï¿½</button>
    </header>

    <button id="expandSidebarBtn" title="Expand Sidebar">âž¤</button>

    <div id="layout">

        <aside id="sidebar">
            <div style="display:flex; justify-content:space-between; align-items:center;">
                <h3>Quick Models</h3>
                <button id="collapseSidebarBtn" class="secondary" style="padding:4px 8px; font-size:0.8rem;">â—€</button>
            </div>
            <div id="quickModelsView"></div>

            <button id="editQuickModelsBtn" class="secondary">Edit Quick Models</button>
            <div id="quickModelsEditor" style="display:none;">
                <textarea id="quickModelsInput" rows="4"></textarea>
                <button id="saveQuickModelsBtn">Save</button>
            </div>

            <hr>

            <select id="modelSelect"></select>
            <button id="loadModelBtn">Load Model</button>

            <hr>

            <h4>System Prompt</h4>
            <!-- Preset dropdown removed -->
            <textarea id="systemPrompt" rows="4">
You are a helpful assistant.
    </textarea>

            <hr>
            <label>Top-P <span id="topPVal">0.9</span></label>
            <input type="range" id="topP" min="0.1" max="1" step="0.05" value="0.9">

            <label>Temperature <span id="tempVal">0.7</span></label>
            <input type="range" id="temperature" min="0" max="1" step="0.05" value="0.7">


            <label>Max Tokens</label>
            <input type="number" id="maxTokens" value="512">

            <button id="clearChatBtn" class="secondary">Reset Chat</button>

        </aside>

        <main id="main">
            <div id="status"></div>
            <div id="tokenStatus"></div>

            <div id="chat"></div>

            <div id="inputBar">
                <textarea id="userInput" rows="1" placeholder="Type message..." disabled></textarea>
                <div style="display:flex; flex-direction:column; gap:4px;">
                    <button id="sendBtn" disabled>Send</button>
                    <button id="stopBtn" class="secondary"
                        style="display:none; font-size:0.8rem; padding:4px;">Stop</button>
                </div>
            </div>
        </main>

    </div>

    <script type="module" src="main.chat.js"></script>
</body>

</html>